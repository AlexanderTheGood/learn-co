#!/usr/bin/env ruby

require 'learn'

NON_PRE_CONFIG_COMMANDS = [
  'reset', 'whoami', 'directory', 'help', 'version', '--version', '-v', 'doctor', 'new', 'hello', 'save'
]

INTERNET_REQUIRED_COMMANDS = [
  'whoami', 'doctor', 'directory', 'reset', 'hello'
]

if ['-v', '--version'].include?(ARGV.first)
  puts Learn::VERSION
  exit
end

Learn::OptionsSanitizer.new(ARGV).sanitize!

if !(NON_PRE_CONFIG_COMMANDS.include?(ARGV[0]))
  system('learn-config') unless Learn::InternetConnection.no_internet_connection?
end

if INTERNET_REQUIRED_COMMANDS.include?(ARGV[0])
  Learn::InternetConnection.test_connection
end

Learn::CLI.start(ARGV)
